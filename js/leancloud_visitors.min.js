"use strict";!function(){function e(e,t){return new Promise(function(n,o){e("get","/classes/Counter?where="+encodeURIComponent(JSON.stringify({target:t}))).then(function(e){return e.json()}).then(function(r){var i=r.results,c=r.code,u=r.error;if(401===c)throw u;if(i&&i.length>0){var a=i[0];n(a)}else e("post","/classes/Counter",{target:t,time:0}).then(function(e){return e.json()}).then(function(e,t){if(t)throw t;n(e)}).catch(function(e){console.error("Failed to create",e),o(e)})}).catch(function(e){console.error("LeanCloud Counter Error:",e),o(e)})})}function t(e,t){return new Promise(function(n,o){e("post","/batch",{requests:t}).then(function(e){if(e=e.json(),e.error)throw e.error;n(e)}).catch(function(e){console.error("Failed to save visitor count",e),o(e)})})}function n(e){return{method:"PUT",path:"/1.1/classes/Counter/"+e,body:{time:{__op:"Increment",amount:1}}}}function o(){var e="LeanCloud_UV_Flag",t=localStorage.getItem(e);return!(t&&(new Date).getTime()-parseInt(t)<=864e5)&&(localStorage.setItem(e,(new Date).getTime().toString()),!0)}function r(r){var i="localhost"!==window.location.hostname,c=[],u=[],a=document.querySelector("#leancloud-site-pv-container");if(a||i){var s=e(r,"site-pv").then(function(e){u.push(n(e.objectId));var t=document.querySelector("#leancloud-site-pv");t&&(t.innerText=e.time+1,a&&(a.style.display="inline"))});c.push(s)}var l=document.querySelector("#leancloud-site-uv-container");if(l||i){var d=e(r,"site-uv").then(function(e){var t=o();t&&u.push(n(e.objectId));var r=document.querySelector("#leancloud-site-uv");r&&(r.innerText=e.time+(t?1:0),l&&(l.style.display="inline"))});c.push(d)}var h=document.querySelector("#leancloud-post-views-container"),f=window.location.pathname;if(h||i){var p=decodeURI(f),m=e(r,p).then(function(e){if(u.push(n(e.objectId)),h){var t=document.querySelector("#leancloud-post-views");t&&(t.innerText=(e.time||0)+1,h.style.display="inline")}});c.push(m)}i&&Promise.all(c).then(function(){u.length>0&&t(r,u)})}function i(e){r(function(t,n,o){return fetch(e+"/1.1"+n,{method:t,headers:{"X-LC-Id":c,"X-LC-Key":u,"Content-Type":"application/json"},body:JSON.stringify(o)})})}var c="ff9ecs9BxakKcRRi4v9SSeug-MdYXbMMI",u="KdlU7L2QzLcUuHYgA7M64GOc",a="-MdYXbMMI"!==c.slice(-9)?"https://admin.qzkyl.ml":"https://"+c.slice(0,8).toLowerCase()+".api.lncldglobal.com";a?i(a):fetch("https://app-router.leancloud.cn/2/route?appId="+c).then(function(e){return e.json()}).then(function(e){i("https://"+e.api_server)})}();