/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /gh/abbw/CDN@master/auto_friends.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function FriendInit(e){Friend_data={el:e.el,type:e.type,repo:e.repo,sort:e.sort,noimg:e.noimg||"https://cdn.jsdelivr.net/gh/abbw/CDN/img/guest.jpg",ldimg:e.ldimg||"https://cdn.jsdelivr.net/gh/abbw/CDN/img/ld.gif",screenshot:{repo:e.screenshot.repo,branch:e.screenshot.branch||"gh-pages",suffix:e.screenshot.suffix||"jpg",ldimg:e.screenshot.ldimg||"https://cdn.jsdelivr.net/gh/abbw/CDN/img/ld2.gif"}},showLoading(),"api"!=Friend_data.type?getFriends_Git():getFriends_Api(e.api),e.screenshot.enable&&(window.onload=function(){getScreenshot(e.screenshot.api)})}function getScreenshot(e){document.querySelectorAll(".friend-item").length;var t=document.createElement("div"),i=document.querySelectorAll(".friend-item");t.setAttribute("class","screen-shot"),t.innerHTML=`<img src="${Friend_data.screenshot.ldimg}" alt="Screenshot">`,t.style.display="none",document.body.appendChild(t);for(var n=0;n<i.length;n++)i[n].onmouseover=function(){t.style.cssText="top:".concat(this.offsetTop+this.clientHeight+5,"px;left:").concat(this.offsetLeft+this.clientWidth/2,"px;max-width:200px;position:absolute;z-index:99;width:100%;box-shadow:0 0 20px -5px rgba(158,158,158,.2);border-radius:3px;margin:0;padding:0;");var i=new Image;i.src=e?e.concat(this.children[0].href.replace(/(http|https):\/\//gi,"").replace(/^(\s|\/)+|(\s|\/)+$/g,"").replace("/","."),".").concat(Friend_data.screenshot.suffix):"https://cdn.jsdelivr.net/gh/".concat(Friend_data.screenshot.repo,"@").concat(Friend_data.screenshot.branch,"/").concat(this.children[0].href.replace(/(http|https):\/\//gi,"").replace(/^(\s|\/)+|(\s|\/)+$/g,"").replace("/","."),".").concat(Friend_data.screenshot.suffix),i.onload=function(){t.children[0].src=i.src}},i[n].onmouseout=function(){t.style.cssText="display:none",t.children[0].src=Friend_data.screenshot.ldimg};n&&document.querySelector("body").appendChild(t)}function getFriends_Api(e){fetch(e).then((e=>e.json())).then((e=>{if(e)if(e.hasOwnProperty("message"))showToast("自助友链获取失败，日志如下：<br>"+e.message,HideLoading());else{var t=[];for(var i in e)t.push(`<div class="friend-item"><a class="friend-item-card" href="${e[i].body.link}" title="${e[i].body.name}" target="_blank"><div class="friend-item-content"><div class="friend-avatar"><img style="border-radius:50%" src="${e[i].body.avatar}" onerror="this.onerror=null;this.src='${Friend_data.noimg}'"></div><div class="friend-text"><div class="friend-name">${e[i].body.name}</div><div class="friend-dsc">${e[i].body.descr}</div></div></div></a></div>`);createFriend(t),showToast("[API] 自助友链数量: "+t.length+" 个已加载",HideLoading(),2e3)}})).catch((e=>showToast("[API] 自助友链请求出错，日志如下：<br>"+e,HideLoading())))}function getFriends_Git(){"github"==Friend_data.type?url="api.github.com":"gitee"==Friend_data.type&&(url="gitee.com/api/v5"),fetch(`https://${url}/repos/${Friend_data.repo}/issues?state=open&sort=created&direction=${Friend_data.sort}&page=1&per_page=100`).then((e=>e.json())).then((e=>{if(e)if(e.hasOwnProperty("message"))showToast("自助友链获取失败，日志如下：<br>"+e.message,HideLoading());else{var t=[];for(var i in e){var n=getBody(e[i].body,"link"),d=getBody(e[i].body,"name"),r=getBody(e[i].body,"descr"),a=getBody(e[i].body,"avatar");t.push(`<div class="friend-item"><a class="friend-item-card" href="${n}" title="${d}" target="_blank"><div class="friend-item-content"><div class="friend-avatar"><img style="border-radius:50%" src="${a}" onerror="this.onerror=null;this.src='${Friend_data.noimg}'"></div><div class="friend-text"><div class="friend-name">${d}</div><div class="friend-dsc">${r}</div></div></div></a></div>`)}createFriend(t),showToast("自助友链Issues数量: "+t.length+" 个加载完毕",HideLoading(),2e3)}})).catch((e=>showToast("自助友链请求出错，日志如下：<br>"+e,HideLoading())))}function createFriend(e){document.querySelector(`${Friend_data.el}`).insertAdjacentHTML("afterBegin",'<div class="friend-item"><a class="friend-item-card" href="https://github.com/abbw/blog_links/issues" title="友链自助申请，无需审核" target="_blank"><div class="friend-item-content"><div class="friend-avatar"><img style="border-radius:50%" src="https://cdn.jsdelivr.net/gh/abbw/CDN/img/who.jpg"></div><div class="friend-text"><div class="friend-name">友链申请</div><div class="friend-dsc">Github无需审核</div></div></div></a></div>');for(let t in e)document.querySelector(`${Friend_data.el}`).insertAdjacentHTML("beforeEnd",e[t])}function showLoading(){document.querySelector(`${Friend_data.el}`).insertAdjacentHTML("beforeBegin",`<div class="loader" style="width:150px;height:150px;margin:0 auto"><img src='${Friend_data.ldimg}'></div>`)}function HideLoading(e){document.querySelector(".loader").style.display="none"}function getBody(e,t){var i=new RegExp(String.raw`${t}:[^\n]*\n`),n=new RegExp(String.raw`(${t}:[\s]*|[\r\n]*)`,"g");let d="该参数有误";return(e=e.match(i))&&e.length>0&&(d=e[0].replace(n,"")),d}function showToast(e,t,i){i=i||1e4,cssText='#Toast_btn{width:333px;color:#000;position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);font-family:"微软雅黑";padding:20px 0px;font-weight:bold;background-color:rgba(255,255,255,0.6);border-radius:18px;text-align:center;padding:30px 0px;box-shadow:0px 0px 10px rgba(0,0,0,0.4);display:none}#Toast_btn div{width:220px;margin:10px auto}#Toast_btn div.btn{width:80px;padding:5px 10px;color:#000}.left{float:left;border:1px solid #000}#Toast_btn div.btn.right{float:right;color:#666}';var n=document.createElement("style");n.appendChild(document.createTextNode(cssText)),document.getElementsByTagName("head")[0].appendChild(n);var d=document.createElement("div");d.id="Toast_btn",d.style="display: block",d.innerHTML=e,document.body.appendChild(d),d.onclick=function(){t&&new Function("",`${t}`)(),d.style="display: none"},setTimeout((function(){document.body.removeChild(d)}),i)}(function(e,t){for(var i=0;i<e.length;i++)if(t===e[i])return!0;return!1})(["qzkyl.ml","localhost","abbw.gitee.io"],window.location.host)?window.Friend=FriendInit:(alert("请勿盗取窃用脚本。\n作者：笨蛋海绵\nQQ：1037887804"),window.top.location.href="https://qzkyl.ml/");
//# sourceMappingURL=/sm/7eb75a8de44aa4aa55febbac6079297d807d122d5c1351b3e7832fa9384daf02.map